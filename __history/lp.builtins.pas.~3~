unit lp.builtins;

interface

uses  classes, SysUtils, Generics.Collections, Variants
  , lp.evaluator;

implementation

function Len(args: TList<TEvalObject>): TEvalObject;
begin
  if (args.Count<>1) then
    Result := TErrorObject.newError('wrong number of arguments. got=%d, want=1', [args.Count])
  else
  begin
    if args[0].ObjetcType=STRING_OBJ then
      Result := TNumberObject.Create(Length(TStringObject(args[0]).Value))
    else
      Result := TErrorObject.newError('argument to `len` not supported, got %s', [args[0].ObjetcType]);
  end;
end;


procedure init;
begin

end;

initialization
  init;

end.
